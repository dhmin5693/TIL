# 부호화와 발전

어플리케이션은 시간이 지나며 변하기 마련이다.

기능 추가, 변경 및 신제품 출시, 사용자 요구사항 변경 등 다양한 이유가 있기 때문이다.

### 데이터 부호화 형식

- 데이터를 파일에 쓰거나 네트워크로 전송하려면 일련의 바이트열로 변환해야 한다.
- 이런 데이터는 메모리에서 사용하는 데이터 구조와는 다르게 표현된다.
- 부호화 (직렬화, 마샬링)
    - 메모리 표현 → 바이트열 전환
- 복호화 (파싱, 언마샬링)
    - 바이트열 → 메모리 표현

### 데이터 형식

- JSON, XML, CSV 같은 형식은 표준화된 부호화 형식으로 많이 사용됨.
- 사람이 읽기 좋은 데이터 교환 형식

### 스리프트와 프로토콜 버퍼

- Apache Thrift, Protocol Buffers는 같은 원리로 개발된 이진 부호화 라이브러리

```json
{
  "userName": "Martin",
  "favoriteNumber": 1337,
  "interests": ["daydreaming", "hacking"]
}
```

```
## Thrift IDL (Interface Definition Language)

struct Person {
  1: required string       userName,
  2: optional i64          favoriteNumber,
  3: optional list<string> interests
```

```
## Protocol buffers IDL

message Person {
  required string user_name      = 1;
  optional int64 favorite_number = 2;
  repeated string interests      = 3;
}
```

- 비슷한 데이터를 사용했으나 각 유형별로 부호화한 용량이 다르다
    - json 부호화는 81 byte
    - 스리프트는 바이너리 프로토콜, 컴팩트 프로토콜이라는 두 가지 방식이 있다.
        - 바이너리 프로토콜 59 byte
        - 컴팩트 프로토콜 34 byte
    - 프로토콜 버퍼는 33 byte
